@page "/"
@inject CardsService CardsService;
@using SharpCards.Models;

<PageTitle>Index</PageTitle>

<h1>Cards!</h1>
@if (CardsService.Cards.Count < 0)
{
	<p><em>Loading...</em></p>
}
else
{
	<button class="btn btn-primary" @onclick="GetRandom">Give me random!</button>
	<CardDetails Card=currentCard />
}
@code {
	private Card currentCard = new Card();

	protected override void OnInitialized()
	{
		// StateContainer.Cards.Length > 0 ? StateContainer.Cards[0] :
		currentCard = new Card
		{
			Id = Guid.Empty,
			FrontText = "Front: No cards found",
			BackText = "Back: No cards found"
		};
	}

	private void GetRandom()
	{
		currentCard = CardsService.Cards.Where(c => c.Id != currentCard.Id).ToArray()[new Random().Next(0,
		CardsService.Cards.Count - 1)];
	}
}